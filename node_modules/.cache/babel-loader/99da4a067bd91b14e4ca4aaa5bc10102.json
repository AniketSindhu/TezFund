{"ast":null,"code":"var _jsxFileName = \"/Users/aniketsindhu/Documents/React projects/crowdfunding_tezos_dapp/src/components/Wallet/ConnectButton.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ConnectButton({\n  Tezos,\n  setWallet,\n  setUserAddress,\n  setUserBalance,\n  setBeaconConnection,\n  wallet\n}) {\n  _s();\n\n  const setup = async userAddress => {\n    setUserAddress(userAddress); // updates balance\n\n    const balance = await Tezos.tz.getBalance(userAddress);\n    setUserBalance(balance.toNumber()); //console.log(\"balance\", balance.toNumber());\n  };\n\n  const connectWallet = async () => {\n    try {\n      console.log(\"connecting wallet\", wallet);\n      await wallet.requestPermissions({\n        network: {\n          type: \"hangzhoun\"\n        }\n      }); // gets user's address\n      //console.log(\"connecting wallet\");\n\n      const userAddress = await wallet.getPKH(); //console.log(\"userAddress\", userAddress);\n\n      await setup(userAddress);\n      setBeaconConnection(true);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      console.log(\"Called\"); // creates a wallet instance\n\n      const options = {\n        name: \"Crowdfunding Dapp\",\n        iconUrl: \"https://tezostaquito.io/img/favicon.png\",\n        preferredNetwork: \"hangzhounet\"\n      };\n      const wallet = new BeaconWallet(options, {\n        name: \"Crowdfunding Dapp\",\n        preferredNetwork: \"hangzhounet\",\n        disableDefaultEvents: true\n      });\n      Tezos.setWalletProvider(wallet);\n      setWallet(wallet); // checks if wallet was connected before\n\n      const activeAccount = await wallet.client.getActiveAccount();\n\n      if (activeAccount) {\n        console.log(activeAccount);\n        const userAddress = await wallet.getPKH();\n        await setup(userAddress);\n        setBeaconConnection(true);\n      }\n    })(); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        margin: \"20px 10px 10px 10px\",\n        backgroundColor: \"#1976D2\",\n        color: \"white\",\n        border: \"none\",\n        cursor: \"pointer\",\n        padding: \"10px 20px\"\n      },\n      onClick: connectWallet,\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Connect Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ConnectButton, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = ConnectButton;\nexport default ConnectButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConnectButton\");","map":{"version":3,"sources":["/Users/aniketsindhu/Documents/React projects/crowdfunding_tezos_dapp/src/components/Wallet/ConnectButton.jsx"],"names":["React","useEffect","BeaconWallet","ConnectButton","Tezos","setWallet","setUserAddress","setUserBalance","setBeaconConnection","wallet","setup","userAddress","balance","tz","getBalance","toNumber","connectWallet","console","log","requestPermissions","network","type","getPKH","error","options","name","iconUrl","preferredNetwork","disableDefaultEvents","setWalletProvider","activeAccount","client","getActiveAccount","margin","backgroundColor","color","border","cursor","padding"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nfunction ConnectButton({\n  Tezos,\n  setWallet,\n  setUserAddress,\n  setUserBalance,\n  setBeaconConnection,\n  wallet,\n}) {\n  const setup = async (userAddress) => {\n    setUserAddress(userAddress);\n    // updates balance\n    const balance = await Tezos.tz.getBalance(userAddress);\n    setUserBalance(balance.toNumber());\n    //console.log(\"balance\", balance.toNumber());\n  };\n\n  const connectWallet = async () => {\n    try {\n      console.log(\"connecting wallet\", wallet);\n      await wallet.requestPermissions({\n        network: {\n          type: \"hangzhoun\",\n        },\n      });\n      // gets user's address\n      //console.log(\"connecting wallet\");\n      const userAddress = await wallet.getPKH();\n      //console.log(\"userAddress\", userAddress);\n      await setup(userAddress);\n      setBeaconConnection(true);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    (async () => {\n      console.log(\"Called\");\n      // creates a wallet instance\n      const options = {\n        name: \"Crowdfunding Dapp\",\n        iconUrl: \"https://tezostaquito.io/img/favicon.png\",\n        preferredNetwork: \"hangzhounet\",\n      };\n      const wallet = new BeaconWallet(options, {\n        name: \"Crowdfunding Dapp\",\n        preferredNetwork: \"hangzhounet\",\n        disableDefaultEvents: true,\n      });\n      Tezos.setWalletProvider(wallet);\n      setWallet(wallet);\n      // checks if wallet was connected before\n      const activeAccount = await wallet.client.getActiveAccount();\n      if (activeAccount) {\n        console.log(activeAccount);\n        const userAddress = await wallet.getPKH();\n        await setup(userAddress);\n        setBeaconConnection(true);\n      }\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return (\n    <div>\n      <button\n        style={{\n          margin: \"20px 10px 10px 10px\",\n          backgroundColor: \"#1976D2\",\n          color: \"white\",\n          border: \"none\",\n          cursor: \"pointer\",\n          padding: \"10px 20px\",\n        }}\n        onClick={connectWallet}\n      >\n        <b>Connect Wallet</b>\n      </button>\n    </div>\n  );\n}\n\nexport default ConnectButton;\n"]},"metadata":{},"sourceType":"module"}